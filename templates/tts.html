<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>üéß StudyMate - AI Audio Summary</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: #f3f4f6;
        }
        .player-container {
            background: #fff;
            padding: 2.5rem;
            border-radius: 20px;
            max-width: 900px;
            margin: auto;
            margin-top: 50px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        .track-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        .wave-visual {
            height: 8px;
            background: linear-gradient(to right, #10b981, #3b82f6);
            margin: 20px 0;
            border-radius: 5px;
        }
        .summary-box {
            background: #f9fafb;
            padding: 1rem;
            border-radius: 10px;
            font-size: 1rem;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="player-container">
        <h2 class="text-center">üéß AI Audio Summary of {{ session.get('book_title', 'Untitled Book') }}</h2>

        <form method="POST" class="my-3 text-end">
            <label for="voice"><strong>üó£Ô∏è Choose Voice:</strong></label>
            <select class="form-select d-inline-block w-auto" name="voice" onchange="this.form.submit()">
                <option value="en-US-AriaNeural" {% if selected_voice == "en-US-AriaNeural" %}selected{% endif %}>üé§ Aria (US Female)</option>
                <option value="en-US-GuyNeural" {% if selected_voice == "en-US-GuyNeural" %}selected{% endif %}>üé§ Elen (US Male)</option>
                <option value="te-IN-ShrutiNeural" {% if selected_voice == "te-IN-ShrutiNeural" %}selected{% endif %}>üé§ TELUGU Neerja (IN Female)</option>
                <option value="te-IN-MohanNeural" {% if selected_voice == "te-IN-MohanNeural" %}selected{% endif %}>TELUGU Mohan (IN Male)</option>
                <option value="en-IN-NeerjaNeural" {% if selected_voice == "en-IN-NeerjaNeural" %}selected{% endif %}>ENGLISH Neerja (IN Female)</option>
                <option value="en-IN-PrabhatNeural" {% if selected_voice == "en-IN-PrabhatNeural" %}selected{% endif %}>ENGLISH Prabhat (IN Female)</option>

            </select>
        </form>

        <div class="track-title">üîä Now Playing: {{ selected_voice.replace('Neural', '') }}</div>
        <audio controls class="w-100">
            <source src="{{ url_for('static', filename=audio_file) }}" type="audio/mpeg">
            Your browser does not support audio playback.
        </audio>
        <div class="wave-visual"></div>

        <h5>üìù Narrated Summary</h5>
        <div class="summary-box">
            {{ summary }}
        </div>

        <div class="text-center mt-4">
            <a href="/chat" class="btn btn-outline-primary">‚¨ÖÔ∏è Back to Chat</a>
            <a href="{{ url_for('static', filename=audio_file) }}" class="btn btn-success ms-2" download>‚¨áÔ∏è Download MP3</a>
        </div>
    </div>
</body>
</html>
